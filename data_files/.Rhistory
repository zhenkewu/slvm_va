type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Regression after removing Pemba and Unknown Month of Death")
xform_noPemba2 <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"siteAP",
"siteUP",
"siteBohol",
"siteDar",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g5_06aUnknown",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Regression after removing Pemba and Unknown Month of Death")
regData_noPemba <- regData_noPemba[!g5_06a%in%c("Don't Know")]
regData_noPemba <- regData_noPemba[!g5_06a%in%c("Unknown")]
level(SregData_noPemba$g5_06a )
levels(regData_noPemba$g5_06a )
regData_noPemba$g5_06a <- as.character(regData_noPemba$g5_06a)
regData_noPemba$g5_06a<- factor(regData_noPemba$g5_06a)
regData_noPemba$g5_06a <- relevel(regData_noPemba$g5_06a,"No Schooling")
multinom_noPemba2 <- multinom(formula =meta_cod~ site + sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba,maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom_noPemba2 <- tidy(multinom_noPemba2)
#multinom_tidy$log_estimate <- log(multinom_tidy$estimate)
xform_noPemba2 <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"siteAP",
"siteUP",
"siteBohol",
"siteDar",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Regression after removing Pemba and Unknown Month of Death")
plot_list <- list()
plot_list[[1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Regression after removing Pemba and Unknown Month of Death")
plot_list[[1]]
i = 1
plot_list <- list()
for(k in level(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title=paste0("Regression for Site ", k, "(Removing Unknown Schooling and Month of Death"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, paste0(title="Std. Errors for Site ", k, "(Removing Unknown Schooling and Month of Death"))
i=i+2
}
i = 1
plot_list <- list()
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title=paste0("Regression for Site ", k, "(Removing Unknown Schooling and Month of Death"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, paste0(title="Std. Errors for Site ", k, "(Removing Unknown Schooling and Month of Death"))
i=i+2
}
plot_list[[1]]
i = 1
plot_list <- list()
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
i = 1
plot_list <- list()
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
i = 1
plot_list <- list()
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
plot_list[[1]]
plot_list[[2]]
plot_list[[2]]i = 1
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom2$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom2$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom2$std.error),3),
type="heatmap",y=tidy_multinom2$y.level,x=tidy_multinoma2$term,
text=paste(
"std. error:", round(tidy_multinom2$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
plot_list <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom$std.error),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinoma$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
plot_list <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
plot_list[[i+1]] <- plot_ly(z=round(log(tidy_multinom$std.error),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
plot_list[[1]]
plot_list[[2]]
plot_list[[3]]
plot_list[[4]]
plot_list[[5]]
plot_list[[7]]
plot_list[[8]]
plot_list[[9]]
plot_list <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
plot_list[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
j = i+1
plot_list[[j]] <- plot_ly(z=round(log(tidy_multinom$std.error),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+2
}
plot_list[[8]]
plot_list[[9]]
plot_list[[10]]
site_plots <- list()
std_error_plots <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
site_plots[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
std_error_plots[[i]] <- plot_ly(z=round(log(tidy_multinom$std.error),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+1
}
std_error_plots[[1]]
xform_noPemba2 <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"siteAP",
"siteUP",
"siteBohol",
"siteDar",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
plot_ly(z=round(log(tidy_multinom_noPemba2$estimate),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Regression after removing Pemba and Unknown Month of Death")
plot_ly(z=round(log(tidy_multinom_noPemba2$std.error),3),
type="heatmap",y=tidy_multinom_noPemba2$y.level,x=tidy_multinom_noPemba2$term,
text=paste(
"std. error:", round(tidy_multinom_noPemba2$std.error, 3)
)) %>%
layout(xaxis = xform_noPemba2, title="Std. Errors after removing Pemba and Unknown Month of Death")
View(tidy_multinom)
site_plots <- list()
std_error_plots <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
site_plots[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(log(tidy_multinom$std.error), 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
std_error_plots[[i]] <- plot_ly(z=round(log(tidy_multinom$std.error),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+1
}
std_error_plots[[1]]
site_plots[[1]]
site_plots[[2]]
multinom_std <- multinom_tidy$std.error
multinom_std
1.949892e-01
site_plots <- list()
std_error_plots <- list()
i = 1
xform_stratify <- list(categoryorder = "array",
categoryarray = c("(Intercept)",
"sexFemale",
"g4_08No",
"g5_06aPrimary School",
"g5_06aHigh School",
"g5_06aCollege or Higher",
"g1_06mFebruary",
"g1_06mMarch",
"g1_06mApril",
"g1_06mMay",
"g1_06mJune",
"g1_06mJuly",
"g1_06mAugust",
"g1_06mSeptember",
"g1_06mOctober",
"g1_06mNovember",
"g1_06mDecember"))
for(k in unique(regData_noPemba$site)){
multinom_bysite <- multinom(formula =meta_cod~ sex +g4_08 + g5_06a + g1_06m,
data = regData_noPemba[site==k],maxit=1000,
family="multinomial",MaxNWts =1000, reltol=1.0e-12)
tidy_multinom <- tidy(multinom_bysite)
site_plots[[i]] <- plot_ly(z=round(log(tidy_multinom$estimate),3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term,
text=paste(
"std. error:", round(tidy_multinom$std.error, 3)
)) %>%
layout(xaxis = xform_stratify, title=paste0("Regression for Site ", k, "(No Unknown Schooling and Month of Death)"))
std_error_plots[[i]] <- plot_ly(z=round(tidy_multinom$std.error,3),
type="heatmap",y=tidy_multinom$y.level,x=tidy_multinom$term) %>%
layout(xaxis = xform_stratify, paste0(title="Std. Errors for Site ", k, "(No Unknown Schooling and Month of Death)"))
i=i+1
}
site_plots[[2]]
site_plots[[1]]
